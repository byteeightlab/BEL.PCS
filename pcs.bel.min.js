/* PrefersColorScheme [BEL.PCS] v0.2 | byteeightlab.ru/#PCS | GNU General Public License v3.0 | byteeightlab.ru/source/bel_pcs/LICENSE */
!function(m){m.prefersColorScheme=function(){function o(e,t){return e?o.set(e,t):o.get()}let n=new Event("prefersColorSchemeChange"),c=document.head.querySelector('meta[name="color-scheme"]'),e=document.head.querySelector('meta[name="supported-color-schemes"]'),r=["light","dark"],s="prefers-color-scheme",a=document.documentElement;e?((r=e.content.split(" ").map(e=>e.toLowerCase())).includes("light")||r.push("light"),r.includes("dark")||r.push("dark")):((e=document.createElement("meta")).name="supported-color-schemes",e.content=r.join(" "),document.head.append(e)),c||((c=document.createElement("meta")).name="color-scheme",document.head.append(c)),o.get=function(){return localStorage.getItem(s)??r.includes(c.content)?c.content:this.systemic()},o.getFromMemory=function(){return localStorage.getItem(s)??"auto"},o.systemic=function(){return m.matchMedia("(prefers-color-scheme: dark)")?.matches?"dark":"light"},o.supported=function(){return r},o.set=function(e,t){r.includes(e.toLowerCase())||(e=r[0]),void 0!==t&&!0!==t||localStorage.setItem(s,e),a.classList.remove(...r.map(e=>e+"-theme")),a.classList.add(e+"-theme"),c.content=e,document.dispatchEvent(n)},o.remove=function(){localStorage.removeItem(s),this.set(this.get(),!1)},o.toggle=function(e){let t=r.indexOf(this.get());++t>=r.length&&(t=0),console.log(r[t],t),this.set(r[t],e)};var t=localStorage.getItem(s);return o.set(t||(r.includes(c.content)?c.content:o.systemic()),!1),m.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>function(e){localStorage.getItem(s)||this.set(e.matches?"dark":"light",!1)}(e)),o}()}(window);